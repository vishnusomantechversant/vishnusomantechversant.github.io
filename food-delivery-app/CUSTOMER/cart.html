<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - Food Delivery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4ecdc4',
                        secondary: '#ff6b6b',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <a href="home.html" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <h1 class="text-xl font-bold text-gray-800">Your Cart</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="profile.html" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-user"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Cart Items -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Cart Items</h2>
            <div id="cartItems" class="space-y-4">
                <!-- Cart items will be dynamically added here -->
            </div>
        </div>

        <!-- Delivery Mode Selection -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Delivery Mode</h2>
            <div class="flex space-x-4">
                <button id="normalDelivery" class="flex-1 py-3 px-4 border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-colors">
                    <i class="fas fa-bolt mr-2"></i>
                    Normal Delivery
                </button>
                <button id="preBooking" class="flex-1 py-3 px-4 border border-gray-300 text-gray-600 rounded-lg hover:border-primary hover:text-primary transition-colors">
                    <i class="fas fa-calendar-alt mr-2"></i>
                    Pre-booking
                </button>
            </div>
        </div>

        <!-- Normal Delivery Options -->
        <div id="normalDeliveryOptions" class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Delivery Details</h2>
            <div class="space-y-4">
                <!-- Delivery Address -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Delivery Address</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="">Select Delivery Address</option>
                        <option value="home">Home - 123 Main Street</option>
                        <option value="office">Office - 456 Business Park</option>
                        <option value="other">Add New Address</option>
                    </select>
                </div>

                <!-- Special Instructions -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Special Instructions</label>
                    <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" rows="2" placeholder="Any special requests or delivery instructions?"></textarea>
                </div>
            </div>
        </div>

        <!-- Pre-booking Options -->
        <div id="preBookingOptions" class="bg-white rounded-lg shadow-sm p-6 mb-6 hidden">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Pre-booking Options</h2>
            <div class="space-y-4">
                <!-- Delivery Address -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Delivery Address</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="">Select Delivery Address</option>
                        <option value="home">Home - 123 Main Street</option>
                        <option value="office">Office - 456 Business Park</option>
                        <option value="other">Add New Address</option>
                    </select>
                </div>

                <!-- Date Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Select Date</label>
                    <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                </div>

                <!-- Time Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Select Time</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="">Select Time</option>
                        <option value="10:00">10:00 AM</option>
                        <option value="10:30">10:30 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="11:30">11:30 AM</option>
                        <option value="12:00">12:00 PM</option>
                        <option value="12:30">12:30 PM</option>
                        <option value="13:00">1:00 PM</option>
                        <option value="13:30">1:30 PM</option>
                        <option value="14:00">2:00 PM</option>
                        <option value="14:30">2:30 PM</option>
                        <option value="15:00">3:00 PM</option>
                        <option value="15:30">3:30 PM</option>
                        <option value="16:00">4:00 PM</option>
                        <option value="16:30">4:30 PM</option>
                        <option value="17:00">5:00 PM</option>
                        <option value="17:30">5:30 PM</option>
                        <option value="18:00">6:00 PM</option>
                        <option value="18:30">6:30 PM</option>
                        <option value="19:00">7:00 PM</option>
                        <option value="19:30">7:30 PM</option>
                        <option value="20:00">8:00 PM</option>
                        <option value="20:30">8:30 PM</option>
                        <option value="21:00">9:00 PM</option>
                    </select>
                </div>

                <!-- Special Instructions -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Special Instructions</label>
                    <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" rows="2" placeholder="Any special requests or dietary requirements?"></textarea>
                </div>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Order Summary</h2>
            <div class="order-summary">
                <!-- Order summary will be dynamically updated -->
            </div>
            <button onclick="window.location.href='checkout.html'" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-opacity-90 transition-colors">
                Proceed to Checkout
            </button>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load cart items from localStorage
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const cartItemsContainer = document.getElementById('cartItems');
            let totalAmount = 0;

            // Display cart items
            cartItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalAmount += itemTotal;

                const itemElement = document.createElement('div');
                itemElement.className = 'flex items-center justify-between border-b pb-4';
                itemElement.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <img src="${item.image}" alt="${item.name}" class="w-20 h-20 rounded-lg object-cover">
                        <div>
                            <h3 class="text-gray-800 font-medium">${item.name}</h3>
                            <p class="text-gray-500 text-sm">â‚¹${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="updateQuantity('${item.id}', -1)" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span class="text-gray-800">${item.quantity}</span>
                        <button onclick="updateQuantity('${item.id}', 1)" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button onclick="removeItem('${item.id}')" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                cartItemsContainer.appendChild(itemElement);
            });

            // Update order summary
            updateOrderSummary(totalAmount);

            // Delivery mode toggle
            const normalDeliveryBtn = document.getElementById('normalDelivery');
            const preBookingBtn = document.getElementById('preBooking');
            const normalDeliveryOptions = document.getElementById('normalDeliveryOptions');
            const preBookingOptions = document.getElementById('preBookingOptions');

            normalDeliveryBtn.addEventListener('click', function() {
                normalDeliveryBtn.classList.add('border-primary', 'text-primary');
                preBookingBtn.classList.remove('border-primary', 'text-primary');
                normalDeliveryOptions.classList.remove('hidden');
                preBookingOptions.classList.add('hidden');
            });

            preBookingBtn.addEventListener('click', function() {
                preBookingBtn.classList.add('border-primary', 'text-primary');
                normalDeliveryBtn.classList.remove('border-primary', 'text-primary');
                preBookingOptions.classList.remove('hidden');
                normalDeliveryOptions.classList.add('hidden');
            });

            // Set default delivery mode
            normalDeliveryBtn.click();
        });

        function updateQuantity(itemId, change) {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const itemIndex = cartItems.findIndex(item => item.id === itemId);
            
            if (itemIndex > -1) {
                cartItems[itemIndex].quantity += change;
                
                // Remove item if quantity becomes 0
                if (cartItems[itemIndex].quantity <= 0) {
                    cartItems.splice(itemIndex, 1);
                }
                
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                location.reload(); // Refresh to update display
            }
        }

        function removeItem(itemId) {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems = cartItems.filter(item => item.id !== itemId);
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            location.reload(); // Refresh to update display
        }

        function updateOrderSummary(subtotal) {
            const deliveryFee = 40;
            const tax = Math.round(subtotal * 0.12); // 12% tax
            const total = subtotal + deliveryFee + tax;

            const orderSummary = document.querySelector('.order-summary');
            if (orderSummary) {
                orderSummary.innerHTML = `
                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between text-gray-600">
                            <span>Subtotal</span>
                            <span>â‚¹${subtotal}</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Delivery Fee</span>
                            <span>â‚¹${deliveryFee}</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Tax</span>
                            <span>â‚¹${tax}</span>
                        </div>
                        <div class="border-t pt-2 mt-2">
                            <div class="flex justify-between text-gray-800 font-semibold">
                                <span>Total</span>
                                <span>â‚¹${total}</span>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
    </script>
</body>
</html> 